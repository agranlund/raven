/*
 * Test:USES_FPU
 */
#include "testconfig.h"
#define TEST_OP_F_F "flogn"
#define TEST_FUNC_F_F fpu_logn
#include "testdriver.h"



static test_f_f_data const flogn_data[] = {
	{ __LINE__, ZERO_P, INF_M, 0 },
	{ __LINE__, ZERO_M, INF_M, 0 },
	{ __LINE__, HEXCONSTE("-1.0", 0xbfff, 0x80000000L, 0x00000000L), QNAN_P, 0 },
	{ __LINE__, MIN_M, QNAN_P, FLAG_MINVAL },
	{ __LINE__, MAX_M, QNAN_P, 0 },
#if __LDBL_MIN_EXP__ <= (-16382)
	{ __LINE__, SUBNORM_P, HEXCONSTE("-1.13994985314888605581e+04", 0xc00c, 0xb21dfe7fL, 0x09e2baa9L), FLAG_SUBNORM|FLAG_INEXACT },
#else
	{ __LINE__, SUBNORM_P, HEXCONSTE("-1.13994985314888605590e+04", 0xc00c, 0xb21dfe7fL, 0x09e2baaaL), FLAG_SUBNORM|FLAG_INEXACT },
#endif
	{ __LINE__, SUBNORM_M, QNAN_P, 0 },
	{ __LINE__, INF_P, INF_P, 0 },
	{ __LINE__, INF_M, QNAN_P, 0 },
	{ __LINE__, QNAN_P, QNAN_P, 0 },
	{ __LINE__, QNAN_M, QNAN_P, 0 },
	{ __LINE__, SNAN_P, QNAN_P, 0 },
	{ __LINE__, SNAN_M, QNAN_P, 0 },

	{ __LINE__, HEXCONSTE("1.00000000000000000000e+00", 0x3fff, 0x80000000L, 0x00000000L), HEXCONSTE("0.00000000000000000000e+00", 0x0000, 0x00000000L, 0x00000000L), 0 },
	{ __LINE__, HEXCONSTE("2.71828198432922363281e+00", 0x4000, 0xadf85500L, 0x00000000L), HEXCONSTE("1.00000005734143248008e+00", 0x3fff, 0x8000007bL, 0x23c92f9aL), FLAG_INEXACT2 },
	{ __LINE__, HEXCONSTE("2.71828174591064453125e+00", 0x4000, 0xadf85400L, 0x00000000L), HEXCONSTE("9.99999969632140018282e-01", 0x3ffe, 0xffffff7dL, 0x922f51a3L), FLAG_INEXACT2 },
	{ __LINE__, HEXCONSTE("2.71828182845904553488e+00", 0x4000, 0xadf85458L, 0xa2bb5000L), HEXCONSTE("1.00000000000000011015e+00", 0x3fff, 0x80000000L, 0x000003f8L), FLAG_INEXACT2 },
	{ __LINE__, HEXCONSTE("2.71828182845904509080e+00", 0x4000, 0xadf85458L, 0xa2bb4800L), HEXCONSTE("9.99999999999999946820e-01", 0x3ffe, 0xffffffffL, 0xfffffc2bL), FLAG_INEXACT2 },
	{ __LINE__, HEXCONSTE("2.71828182845904523543e+00", 0x4000, 0xadf85458L, 0xa2bb4a9bL), HEXCONSTE("1.00000000000000000000e+00", 0x3fff, 0x80000000L, 0x00000000L), FLAG_INEXACT2 },
	{ __LINE__, HEXCONSTE("2.71828182845904523521e+00", 0x4000, 0xadf85458L, 0xa2bb4a9aL), HEXCONSTE("9.99999999999999999946e-01", 0x3ffe, 0xffffffffL, 0xffffffffL), FLAG_INEXACT2 },
	{ __LINE__, HEXCONSTE("3.67879450321197509766e-01", 0x3ffd, 0xbc5ab200L, 0x00000000L), HEXCONSTE("-9.99999975128387046423e-01", 0xbffe, 0xffffff95L, 0x2d5f52b9L), FLAG_INEXACT2 },
	{ __LINE__, HEXCONSTE("3.67879420518875122070e-01", 0x3ffd, 0xbc5ab100L, 0x00000000L), HEXCONSTE("-1.00000005613949970531e+00", 0xbfff, 0x80000078L, 0x8f042fa1L), FLAG_INEXACT2 },
	{ __LINE__, HEXCONSTE("3.67879441171442334024e-01", 0x3ffd, 0xbc5ab1b1L, 0x6779c000L), HEXCONSTE("-9.99999999999999966227e-01", 0xbffe, 0xffffffffL, 0xfffffd91L), FLAG_INEXACT2 },
	{ __LINE__, HEXCONSTE("3.67879441171442278513e-01", 0x3ffd, 0xbc5ab1b1L, 0x6779b800L), HEXCONSTE("-1.00000000000000011709e+00", 0xbfff, 0x80000000L, 0x00000438L), FLAG_INEXACT2 },
	{ __LINE__, HEXCONSTE("3.67879441171442321610e-01", 0x3ffd, 0xbc5ab1b1L, 0x6779be36L), HEXCONSTE("-9.99999999999999999946e-01", 0xbffe, 0xffffffffL, 0xffffffffL), FLAG_INEXACT2 },
	{ __LINE__, HEXCONSTE("3.67879441171442321583e-01", 0x3ffd, 0xbc5ab1b1L, 0x6779be35L), HEXCONSTE("-1.00000000000000000000e+00", 0xbfff, 0x80000000L, 0x00000000L), FLAG_INEXACT2 },
	{ __LINE__, HEXCONSTE("2.00000000000000000000e+00", 0x4000, 0x80000000L, 0x00000000L), HEXCONSTE("6.93147180559945309429e-01", 0x3ffe, 0xb17217f7L, 0xd1cf79acL), FLAG_INEXACT2 },
	{ __LINE__, HEXCONSTE("1.00000000000000000000e+01", 0x4002, 0xa0000000L, 0x00000000L), HEXCONSTE("2.30258509299404568404e+00", 0x4000, 0x935d8dddL, 0xaaa8ac17L), FLAG_INEXACT2 },
	{ __LINE__, HEXCONSTE("7.50000000000000000000e-01", 0x3ffe, 0xc0000000L, 0x00000000L), HEXCONSTE("-2.87682072451780927443e-01", 0xbffd, 0x934b1089L, 0xa6dc93c2L), FLAG_INEXACT2 },
	{ __LINE__, HEXCONSTE("1.00000011920928955078e+00", 0x3fff, 0x80000100L, 0x00000000L), HEXCONSTE("1.19209282445354457085e-07", 0x3fe7, 0xffffff00L, 0x00015555L), FLAG_INEXACT },
	{ __LINE__, HEXCONSTE("1.00000011920928955078e+00", 0x3fff, 0x80000100L, 0x00000000L), HEXCONSTE("1.19209282445354457085e-07", 0x3fe7, 0xffffff00L, 0x00015555L), FLAG_INEXACT },
	{ __LINE__, HEXCONSTE("1.00000000000000000000e+00", 0x3fff, 0x80000000L, 0x00000000L), HEXCONSTE("0.00000000000000000000e+00", 0x0000, 0x00000000L, 0x00000000L), 0 },
	{ __LINE__, HEXCONSTE("1.00000000000000022204e+00", 0x3fff, 0x80000000L, 0x00000800L), HEXCONSTE("2.22044604925031283433e-16", 0x3fca, 0xffffffffL, 0xfffff800L), 0 },
	{ __LINE__, HEXCONSTE("1.00000011920928955078e+00", 0x3fff, 0x80000100L, 0x00000000L), HEXCONSTE("1.19209282445354457085e-07", 0x3fe7, 0xffffff00L, 0x00015555L), FLAG_INEXACT },
	{ __LINE__, HEXCONSTE("1.00000000000000000000e+00", 0x3fff, 0x80000000L, 0x00000000L), HEXCONSTE("0.00000000000000000000e+00", 0x0000, 0x00000000L, 0x00000000L), 0 },
	{ __LINE__, HEXCONSTE("1.00000000000000022204e+00", 0x3fff, 0x80000000L, 0x00000800L), HEXCONSTE("2.22044604925031283433e-16", 0x3fca, 0xffffffffL, 0xfffff800L), FLAG_INEXACT },
	{ __LINE__, HEXCONSTE("1.00000000000000000011e+00", 0x3fff, 0x80000000L, 0x00000001L), HEXCONSTE("1.08420217248550443395e-19", 0x3fbf, 0xffffffffL, 0xffffffffL), FLAG_INEXACT },
	{ __LINE__, HEXCONSTE("1.00000011920928955078e+00", 0x3fff, 0x80000100L, 0x00000000L), HEXCONSTE("1.19209282445354457085e-07", 0x3fe7, 0xffffff00L, 0x00015555L), FLAG_INEXACT },
	{ __LINE__, HEXCONSTE("1.00000000000000000000e+00", 0x3fff, 0x80000000L, 0x00000000L), HEXCONSTE("0.00000000000000000000e+00", 0x0000, 0x00000000L, 0x00000000L), 0 },
	{ __LINE__, HEXCONSTE("1.00000000000000022204e+00", 0x3fff, 0x80000000L, 0x00000800L), HEXCONSTE("2.22044604925031283433e-16", 0x3fca, 0xffffffffL, 0xfffff800L), 0 },
	{ __LINE__, HEXCONSTE("1.00000000000000000011e+00", 0x3fff, 0x80000000L, 0x00000001L), HEXCONSTE("1.08420217248550443395e-19", 0x3fbf, 0xffffffffL, 0xffffffffL), FLAG_INEXACT },
	{ __LINE__, HEXCONSTE("1.00000011920928955078e+00", 0x3fff, 0x80000100L, 0x00000000L), HEXCONSTE("1.19209282445354457085e-07", 0x3fe7, 0xffffff00L, 0x00015555L), FLAG_INEXACT },
	{ __LINE__, HEXCONSTE("1.00000000000000000000e+00", 0x3fff, 0x80000000L, 0x00000000L), HEXCONSTE("0.00000000000000000000e+00", 0x0000, 0x00000000L, 0x00000000L), 0 },
	{ __LINE__, HEXCONSTE("1.00000000000000022204e+00", 0x3fff, 0x80000000L, 0x00000800L), HEXCONSTE("2.22044604925031283433e-16", 0x3fca, 0xffffffffL, 0xfffff800L), 0 },
	{ __LINE__, HEXCONSTE("1.00000000000000000011e+00", 0x3fff, 0x80000000L, 0x00000001L), HEXCONSTE("1.08420217248550443395e-19", 0x3fbf, 0xffffffffL, 0xffffffffL), FLAG_INEXACT },
	{ __LINE__, HEXCONSTE("9.99999940395355224609e-01", 0x3ffe, 0xffffff00L, 0x00000000L), HEXCONSTE("-5.96046465517475349885e-08", 0xbfe7, 0x80000040L, 0x00002aabL), FLAG_INEXACT },
	{ __LINE__, HEXCONSTE("1.00000000000000000000e+00", 0x3fff, 0x80000000L, 0x00000000L), HEXCONSTE("0.00000000000000000000e+00", 0x0000, 0x00000000L, 0x00000000L), 0 },
	{ __LINE__, HEXCONSTE("9.99999940395355224609e-01", 0x3ffe, 0xffffff00L, 0x00000000L), HEXCONSTE("-5.96046465517475349885e-08", 0xbfe7, 0x80000040L, 0x00002aabL), FLAG_INEXACT },
	{ __LINE__, HEXCONSTE("9.99999999999999888978e-01", 0x3ffe, 0xffffffffL, 0xfffff800L), HEXCONSTE("-1.11022302462515660205e-16", 0xbfca, 0x80000000L, 0x00000200L), 0 },
	{ __LINE__, HEXCONSTE("1.00000000000000000000e+00", 0x3fff, 0x80000000L, 0x00000000L), HEXCONSTE("0.00000000000000000000e+00", 0x0000, 0x00000000L, 0x00000000L), 0 },
	{ __LINE__, HEXCONSTE("9.99999940395355224609e-01", 0x3ffe, 0xffffff00L, 0x00000000L), HEXCONSTE("-5.96046465517475349885e-08", 0xbfe7, 0x80000040L, 0x00002aabL), FLAG_INEXACT },
	{ __LINE__, HEXCONSTE("9.99999999999999888978e-01", 0x3ffe, 0xffffffffL, 0xfffff800L), HEXCONSTE("-1.11022302462515660205e-16", 0xbfca, 0x80000000L, 0x00000200L), 0 },
	{ __LINE__, HEXCONSTE("9.99999999999999999946e-01", 0x3ffe, 0xffffffffL, 0xffffffffL), HEXCONSTE("-5.42101086242752217004e-20", 0xbfbf, 0x80000000L, 0x00000000L), FLAG_INEXACT },
	{ __LINE__, HEXCONSTE("1.00000000000000000000e+00", 0x3fff, 0x80000000L, 0x00000000L), HEXCONSTE("0.00000000000000000000e+00", 0x0000, 0x00000000L, 0x00000000L), 0 },
	{ __LINE__, HEXCONSTE("9.99999940395355224609e-01", 0x3ffe, 0xffffff00L, 0x00000000L), HEXCONSTE("-5.96046465517475349885e-08", 0xbfe7, 0x80000040L, 0x00002aabL), FLAG_INEXACT },
	{ __LINE__, HEXCONSTE("9.99999999999999888978e-01", 0x3ffe, 0xffffffffL, 0xfffff800L), HEXCONSTE("-1.11022302462515660205e-16", 0xbfca, 0x80000000L, 0x00000200L), 0 },
	{ __LINE__, HEXCONSTE("9.99999999999999999946e-01", 0x3ffe, 0xffffffffL, 0xffffffffL), HEXCONSTE("-5.42101086242752217004e-20", 0xbfbf, 0x80000000L, 0x00000000L), FLAG_INEXACT },
	{ __LINE__, HEXCONSTE("1.00000000000000000000e+00", 0x3fff, 0x80000000L, 0x00000000L), HEXCONSTE("0.00000000000000000000e+00", 0x0000, 0x00000000L, 0x00000000L), 0 },
	{ __LINE__, HEXCONSTE("9.99999940395355224609e-01", 0x3ffe, 0xffffff00L, 0x00000000L), HEXCONSTE("-5.96046465517475349885e-08", 0xbfe7, 0x80000040L, 0x00002aabL), FLAG_INEXACT },
	{ __LINE__, HEXCONSTE("9.99999999999999888978e-01", 0x3ffe, 0xffffffffL, 0xfffff800L), HEXCONSTE("-1.11022302462515660205e-16", 0xbfca, 0x80000000L, 0x00000200L), 0 },
	{ __LINE__, HEXCONSTE("9.99999999999999999946e-01", 0x3ffe, 0xffffffffL, 0xffffffffL), HEXCONSTE("-5.42101086242752217004e-20", 0xbfbf, 0x80000000L, 0x00000000L), FLAG_INEXACT },
	{ __LINE__, HEXCONSTE("1.17549435082228750797e-38", 0x3f81, 0x80000000L, 0x00000000L), HEXCONSTE("-8.73365447505531089858e+01", 0xc005, 0xaeac4f97L, 0xf2883bc5L), 0 },
	{ __LINE__, HEXCONSTE("2.22507385850720138309e-308", 0x3c01, 0x80000000L, 0x00000000L), HEXCONSTE("-7.08396418532264106227e+02", 0xc008, 0xb1195eebL, 0xd5e691efL), FLAG_INEXACT },
	{ __LINE__, HEXCONSTE("3.36210314311209350626e-4932", 0x0001, 0x80000000L, 0x00000000L), HEXCONSTE("-1.13551371119330240589e+04", 0xc00c, 0xb16c8c67L, 0x1210eb30L), 0 },
#if __LDBL_MIN_EXP__ <= (-16382)
	{ __LINE__, HEXCONSTE("1.68105157155604675313e-4932", 0x0000, 0x40000000L, 0x00000000L), HEXCONSTE("-1.13565234062941439497e+04", 0xc00c, 0xb17217f7L, 0xd1cf79acL), FLAG_SUBNORM|FLAG_INEXACT },
	{ __LINE__, HEXCONSTE("3.64519953188247460253e-4951", 0x0000, 0x00000000L, 0x00000001L), HEXCONSTE("-1.13988053843083006136e+04", 0xc00c, 0xb21dfe7fL, 0x09e2baaaL), FLAG_SUBNORM|FLAG_INEXACT },
#else
	{ __LINE__, HEXCONSTE("1.68105157155604675313e-4932", 0x0000, 0x40000000L, 0x00000000L), HEXCONSTE("-1.13558302591135840043e+04", 0xc00c, 0xb16f522fL, 0x71f0326eL), FLAG_SUBNORM|FLAG_INEXACT },
	{ __LINE__, HEXCONSTE("3.64519953188247460253e-4951", 0x0000, 0x00000000L, 0x00000001L), HEXCONSTE("-1.13988053843083006136e+04", 0xc00c, 0xb21b38b6L, 0xaa03736cL), FLAG_SUBNORM|FLAG_INEXACT },
#endif
	{ __LINE__, HEXCONSTE("2.00416836000897277800e-292", 0x3c36, 0x80000000L, 0x00000000L), HEXCONSTE("-6.71659617962587004836e+02", 0xc008, 0xa7ea372eL, 0x424a94e3L), FLAG_INEXACT },
	{ __LINE__, HEXCONSTE("1.40129846432481707092e-45", 0x3f6a, 0x80000000L, 0x00000000L), HEXCONSTE("-1.03278929903431851103e+02", 0xc005, 0xce8ecfe6L, 0x7a3b83a2L), FLAG_INEXACT },
	{ __LINE__, HEXCONSTE("4.94065645841246544177e-324", 0x3bcd, 0x80000000L, 0x00000000L), HEXCONSTE("-7.44440071921381262332e+02", 0xc008, 0xba1c2a23L, 0x6b8e1b1dL), FLAG_INEXACT },
	{ __LINE__, HEXCONSTE("3.40282346638528859812e+38", 0x407e, 0xffffff00L, 0x00000000L), HEXCONSTE("8.87228390520683530551e+01", 0x4005, 0xb17217f5L, 0xd1cf78acL), 0 },
	{ __LINE__, HEXCONSTE("1.79769313486231570815e+308", 0x43fe, 0xffffffffL, 0xfffff800L), HEXCONSTE("7.09782712893383996744e+02", 0x4008, 0xb17217f7L, 0xd1cf79aaL), 0 },
	{ __LINE__, HEXCONSTE("1.18973149535723176502e+4932", 0x7ffe, 0xffffffffL, 0xffffffffL), HEXCONSTE("1.13565234062941439497e+04", 0x400c, 0xb17217f7L, 0xd1cf79acL), 0 },
	{ __LINE__, HEXCONSTE("6.90763413906097412109e-01", 0x3ffe, 0xb0d5df00L, 0x00000000L), HEXCONSTE("-3.69957896031518082254e-01", 0xbffd, 0xbd6b1f10L, 0xb465b128L), FLAG_INEXACT },
	{ __LINE__, HEXCONSTE("1.42284202575683593750e+00", 0x3fff, 0xb61fb000L, 0x00000000L), HEXCONSTE("3.52656298016666307216e-01", 0x3ffd, 0xb48f5dc5L, 0x6b869f00L), FLAG_INEXACT2 },
	{ __LINE__, HEXCONSTE("6.67580127716064453125e-01", 0x3ffe, 0xaae68800L, 0x00000000L), HEXCONSTE("-4.04095854389945499001e-01", 0xbffd, 0xcee5a6deL, 0x1ba5184eL), FLAG_INEXACT2 },
	{ __LINE__, HEXCONSTE("1.76951415275520000000e+13", 0x402b, 0x80bfc500L, 0x00000000L), HEXCONSTE("3.05043112278602514056e+01", 0x4003, 0xf408d453L, 0x3552b4c4L), 0 },
	{ __LINE__, HEXCONSTE("7.17688586240000000000e+10", 0x4023, 0x85ae0f00L, 0x00000000L), HEXCONSTE("2.49967164950154518994e+01", 0x4003, 0xc7f9467fL, 0x6bcd0801L), 0 },
	{ __LINE__, HEXCONSTE("3.40282346638528859812e+38", 0x407e, 0xffffff00L, 0x00000000L), HEXCONSTE("8.87228390520683530551e+01", 0x4005, 0xb17217f5L, 0xd1cf78acL), 0 },
	{ __LINE__, HEXCONSTE("4.77814749966756723348e+279", 0x43a0, 0x86c5f0a2L, 0x1fa4e000L), HEXCONSTE("6.43985293864353479876e+02", 0x4008, 0xa0ff0f0dL, 0xff164000L), 0 },
	{ __LINE__, HEXCONSTE("1.57271742820739746094e+00", 0x3fff, 0xc94ece00L, 0x00000000L), HEXCONSTE("4.52804969164463860771e-01", 0x3ffd, 0xe7d60d8cL, 0x0e298bffL), FLAG_INEXACT3 },
	{ __LINE__, HEXCONSTE("1.46485054492950439453e+00", 0x3fff, 0xbb803900L, 0x00000000L), HEXCONSTE("3.81753220151964734759e-01", 0x3ffd, 0xc3752877L, 0x640869b9L), FLAG_INEXACT3 },
};


int main(int argc, char **argv)
{
	int status;
	
	status = 0;
	
	if (argc > 1)
		testonly = (int)strtol(argv[1], NULL, 0);
	
	set_precision(FPCR_PRECISION_EXTENDED);
	set_rounding(FPCR_ROUND_NEAR);
	
#ifdef TEST_OP_F_F
	status |= test_table_f_f_op(flogn_data, ARRAY_SIZE(flogn_data), __FILE__);
#endif
#ifdef TEST_FUNC_F_F
	status |= test_table_f_f_func(flogn_data, ARRAY_SIZE(flogn_data), __FILE__);
#endif
	
	return status ? EXIT_FAILURE : EXIT_SUCCESS;
}
